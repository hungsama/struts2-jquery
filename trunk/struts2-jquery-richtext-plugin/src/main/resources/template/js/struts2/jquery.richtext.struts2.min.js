/*
 * jquery.richtext.struts2.min.js
 *
 * Integration of richtext editor with struts 2 
 *
 * Requires use of jquery.struts2.js
 *
 * Copyright (c) 2010 Johannes Geppert http://www.jgeppert.com
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */
(function(a){a.struts2_jquery_richtext={editors:new Array(),clean:function(b){if(!window.CKEDITOR){return}a.each(a.struts2_jquery_richtext.editors,function(c,d){var e=CKEDITOR.instances[d];if(b.length===0||!e||e.textarea!=b[0]){a.struts2_jquery_richtext.editors.splice(c);delete CKEDITOR.instances[d]}})},ckeditor:function(b,e){s2jlog("ckeditor for : "+e.id);a.require("js/ckeditor/ckeditor.js");a.require("js/ckeditor/adapters/jquery.js");var f=CKEDITOR.instances[e.id];if(f){CKEDITOR.remove(f)}this.clean(b);var d=function(){a.struts2_jquery_richtext.editors.editors[a.struts2_jquery_richtext.editors.length]=e.id;if(e.onEditorReadyTopics){var g={};publishTopic(b,e.onEditorReadyTopics,g);publishTopic(b,e.options.onalwaystopics,g)}};if(e.href&&e.href!="#"){var c="s2j_ckeditor_"+e.id;if(b.isSubscribed(c)){b.unsubscribe(c)}b.subscribe(c,function(g,h){b.ckeditor(d,e)});if(e.oncompletetopics&&e.oncompletetopics!=""){e.oncompletetopics=c}else{e.oncompletetopics=c}this.container(b,e)}else{this.container(b,e);b.ckeditor(d,e)}}};a.extend(a.struts2_jquery_richtext,a.struts2_jquery)})(jQuery);